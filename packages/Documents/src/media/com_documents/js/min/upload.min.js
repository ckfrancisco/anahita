/*! anahita 15-11-2017 */
!function(a,b){"use strict";Dropzone.autoDiscover=!1,a.widget("anahita.documentUpload",{_create:function(){var b=this;this.uploadedDocumentIds=[];var c={sending:function(b,c,d){var e=a(this.element).find('select[name="access"]').val();d.append("access",e)},success:function(a,c,d){b.uploadedDocumentIds.push(c.id)},queuecomplete:function(){if(b.uploadedDocumentIds.length>0){var c=b.options.setsUrl;a.each(b.uploadedDocumentIds,function(a,b){c+="&document_id[]="+b}),a.get(c,function(c){a(b.element).html(c)})}}};c=a.extend({},this.options,c),this.dropzone=new Dropzone(this.options.filedrop,c),this._on(this.element,{'click [data-trigger="UploadDocuments"]':function(a){a.preventDefault(),this.dropzone.enqueueFiles(this.dropzone.getFilesWithStatus(Dropzone.ADDED))}}),this._on(this.element,{'click [data-trigger="RemoveDocuments"]':function(a){a.preventDefault(),this.dropzone.removeAllFiles(!0)}})}}),a.widget("documents.documentsSetAssignment",{_create:function(){var b=a(this.element).find('input[name="title"]'),c=a(this.element).find('select[name="id"]');this._on(c,{change:function(c){""!=a(c.target).val()?b.attr("disabled",!0):b.attr("disabled",!1)}}),this._on(b,{change:function(b){""!=a(b.target).val()?c.attr("disabled",!0):c.attr("disabled",!1)}})}}),a(document).ajaxSuccess(function(){a("#documents-set-assignment").documentsSetAssignment()})}(jQuery,window);